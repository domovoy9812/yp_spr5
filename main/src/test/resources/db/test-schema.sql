-- Role: bliushtein_yp_sprint5
-- DROP ROLE IF EXISTS bliushtein_yp_sprint5;

CREATE ROLE bliushtein_yp_sprint5 WITH
  LOGIN
  NOSUPERUSER
  INHERIT
  NOCREATEDB
  NOCREATEROLE
  NOREPLICATION
  NOBYPASSRLS
  ENCRYPTED PASSWORD 'SCRAM-SHA-256$4096:fRL6xD9oHDwVIAyrFZXHNw==$s+idfe1QVEVlnIV3tYkL4Y6Qk20N7MARPA4wFK6FIgA=:3qiGy4zviEsfdEVEVxaexK64Mi8FFPEenHTEN3Ns00Q=';

-- Table: public.images

-- DROP TABLE IF EXISTS public.images;

CREATE TABLE IF NOT EXISTS public.images
(
    id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 9223372036854775807 CACHE 1 ),
    image bytea NOT NULL,
    CONSTRAINT image_pkey PRIMARY KEY (id)
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.images
    OWNER to bliushtein_yp_sprint5;

-- Table: public.items

-- DROP TABLE IF EXISTS public.items;

CREATE TABLE IF NOT EXISTS public.items
(
    amount_in_cart integer NOT NULL,
    price integer NOT NULL,
    id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 9223372036854775807 CACHE 1 ),
    image_id bigint,
    description character varying(255) COLLATE pg_catalog."default",
    name character varying(255) COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT items_pkey PRIMARY KEY (id)
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.items
    OWNER to bliushtein_yp_sprint5;

-- Table: public.orders

-- DROP TABLE IF EXISTS public.orders;

CREATE TABLE IF NOT EXISTS public.orders
(
    total_price integer NOT NULL,
    id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 9223372036854775807 CACHE 1 ),
    CONSTRAINT orders_pkey PRIMARY KEY (id)
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.orders
    OWNER to bliushtein_yp_sprint5;

-- Table: public.order_items

    -- DROP TABLE IF EXISTS public.order_items;

    CREATE TABLE IF NOT EXISTS public.order_items
    (
        amount integer NOT NULL,
        price integer NOT NULL,
        id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 9223372036854775807 CACHE 1 ),
        image_id bigint,
        item_id bigint NOT NULL,
        order_id bigint NOT NULL,
        item_description character varying(255) COLLATE pg_catalog."default" NOT NULL,
        item_name character varying(255) COLLATE pg_catalog."default" NOT NULL,
        CONSTRAINT order_items_pkey PRIMARY KEY (id),
        CONSTRAINT fkbioxgbv59vetrxe0ejfubep1w FOREIGN KEY (order_id)
            REFERENCES public.orders (id) MATCH SIMPLE
            ON UPDATE NO ACTION
            ON DELETE NO ACTION
    )

    TABLESPACE pg_default;

    ALTER TABLE IF EXISTS public.order_items
        OWNER to bliushtein_yp_sprint5;